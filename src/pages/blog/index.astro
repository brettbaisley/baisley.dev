---
import { getCollection } from "astro:content";
import MainLayout from "../../layouts/MainLayout.astro";

const pageTitle = "Brett's Blog";
const allPosts = await getCollection("blog");
allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<MainLayout pageTitle={pageTitle}>
  <section class="container mx-auto p-4 py-12">
    <h2 class="text-5xl mb-4 tracking-tight font-extrabold text-black dark:text-slate-200">{pageTitle}</h2>
    <p class="text-slate-600">This is the personal blog written by <em>Brett Baisley</em>. Who is that? Well, not only is he a fantastic guy, he is a support engineer with 20+ years experience. He started blogging as he incorrectly thought the rest of the world was interested in his thoughts. Poor guy, how wrong he was...</p>


    <h2 class="text-3xl mt-8 text-black dark:text-slate-400">Blog Articles</h2>
    <ul class="grid grid-cols-1 lg:max-w-none md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-4">
      {
        allPosts.map((post, index, array) => {
          const pubDate = new Date(post.data.pubDate);

          return(
          <li>
            <time datetime={pubDate.toISOString().split('T')[0]} class="text-xs text-gray-500">{pubDate.toISOString().split('T')[0]}</time>
            <a href={`/blog/${post.id}/`}>
              <h3 class="mt-2 text-xl text-slate-800 dark:text-slate-300">{post.data.title}</h3>
              <p class="mt-2 line-clamp-3 text-sm text-gray-600">{post.data.description}</p>
            </a>
           

          </li>
          );
        })
      }
    </ul>
  </section>
</MainLayout>
