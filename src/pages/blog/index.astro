---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";

const pageTitle = "Brett's Blog";
const allPosts = await getCollection("blog");
allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout pageTitle={pageTitle}>
  <section class="container mx-auto p-4 py-12">
    <h2 class="text-5xl mb-4">{pageTitle}</h2>
    <p>This is the personal blog written by <em>Brett Baisley</em>. Who is that? Well, not only is he a fantastic guy, he is a support engineer with 20+ years experience. He started blogging as he incorrectly thought the rest of the world was interested in his thoughts. Poor guy, how wrong he was...</p>


    <h2 class="text-3xl mt-4">Blog Articles</h2>
    <ul class="grid max-w-2xl grid-cols-1 lg:max-w-none lg:grid-cols-3 gap-6 mt-4">
      {
        allPosts.map((post, index, array) => {
          const pubDate = new Date(post.data.pubDate);

          return(
          <li>
            <time datetime={pubDate.toISOString().split('T')[0]} class="text-xs text-gray-500">{pubDate.toISOString().split('T')[0]}</time>
            <a href={`/blog/${post.id}/`}>
              <h3 class="mt-2 text-xl text-gray-900">{post.data.title}</h3>
              <p class="mt-2 line-clamp-3 text-sm text-gray-600">{post.data.description}</p>
            </a>
           

          </li>
          );
        })
      }
    </ul>
  </section>
</BaseLayout>
